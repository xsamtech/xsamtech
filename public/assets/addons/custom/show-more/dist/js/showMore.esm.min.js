const t=(t,e)=>{let{rows:s,children:n}=t;const i="table"===e?s:n,l=[].slice.call(i).filter(t=>t.classList.contains("hidden")).length;return 0!==l?" "+l:""},e=function(t,e){return void 0===e&&(e=!1),t.classList[e?"add":"remove"]("hidden")},s=(t,e)=>{for(let s in e)t.setAttribute(s,e[s])},n=t=>document.createElement(t),i={newLine:{match:/(\r\n|\n|\r)/gm,replace:""},space:{match:/\s\s+/gm,replace:" "},br:{match:/<br\s*\/?>/gim,replace:""},html:{match:/(<((?!b|\/b|!strong|\/strong)[^>]+)>)/gi,replace:""}},l={typeElement:"span",more:!1,less:!1,number:!1,nobutton:!1,after:0,btnClass:"show-more-btn",btnClassAppend:null};class r{constructor(r,a){let{onMoreLess:o=(()=>{}),regex:h={},config:c}=void 0===a?{}:a;this.t=()=>{const{element:t,after:i,ellipsis:l,nobutton:r,limit:a,type:o}=this.s;s(t,{"aria-expanded":"false"});const h=a+i,c=!1===l?"":"...";if("text"===o){const e=t.innerHTML.trim();if(t.textContent.trim().length>h){let s=e;for(let t in this.i){const{match:e,replace:n}=this.i[t];t&&e&&(s=s.replace(e,n))}const i=((t,e)=>{let s=n("div");return s.insertAdjacentHTML("afterbegin",t),function t(e,s){let n=e.firstChild;do{3===n.nodeType?s(n):1===n.nodeType&&n.childNodes&&n.childNodes[0]&&t(n,s)}while(n=n.nextSibling)}(s,(function(t){if(e>0){let s=t.data.length;(e-=s)<=0&&(t.data=t.substringData(0,t.data.length+e))}else t.data=""})),s.innerHTML})(s,a-1).concat(c);if(t.textContent="",t.insertAdjacentHTML("beforeend",i),this.l(t,{...this.s,originalText:e,truncatedText:i}),r)return;this.o(this.s)}}if("list"===o||"table"===o){const s=this.h(t,o);if(s.length>h){for(let t=a;t<s.length;t++)e(s[t],!0);if(r||this.o(this.s),this.l("list"===o?t:t.nextElementSibling,this.s),r)return}}},this.l=(t,e)=>t.addEventListener("click",this.p.bind(this,e)),this.m=e=>{let{element:i,number:l,less:r,more:a,type:o,btnClass:h,btnClassAppend:c}=e;const d=this.u?r||"":a||"",p=this.u?"collapse":"expand",f=!!this.u,m=n("button");return m.className=null==c?h:h+" "+c,s(m,{"aria-expanded":f,"aria-label":p,tabindex:0}),m.insertAdjacentHTML("beforeend",l?d+t(i,o):d),m},this.p=(t,s)=>{let{target:i}=s;const{element:l,type:r,limit:a,less:o,typeElement:h,originalText:c,truncatedText:d,btnClass:p}=t,f=i.classList.contains(p);if(!f)return;const m=l.getAttribute("aria-expanded");if(this.u="false"===m,"text"===r&&f&&(l.textContent="",l.insertAdjacentHTML("beforeend",this.u?c:d),o)){const e=n(h);e.classList.add("show-more-wrapper"),e.insertAdjacentElement("beforeend",this.m(t)),l.appendChild(e)}if("list"===r||"table"===r){const t=this.h(l,r);for(let s=0;s<t.length;s++){const n="list"===r?s>=a&&s<t.length-1:s>=a;"false"===m?e(t[s]):n&&e(t[s],!0)}}r&&this.g({...t,target:i})},this.h=(t,e)=>"list"===e?[].slice.call(t.children):t.rows,this.o=t=>{const{type:e,element:s,more:i,typeElement:l}=t;if(i)if("table"===e)s.insertAdjacentElement("afterend",this.m(t));else{const e=n(l);e.classList.add("show-more-wrapper"),e.appendChild(this.m(t)),s.appendChild(e)}},this.g=e=>{const{element:n,type:i,less:l,more:r,number:a,target:o}=e,h=this.u?l:r,c=this.u?"expand":"collapse",d="table"===i?i:"the "+i,p=n.lastElementChild;s(n,{"aria-expanded":this.u}),s(o,{"aria-expanded":this.u,"aria-label":c+" "+d}),this.C(c,e),h?o.innerHTML=a?h+t(n,i):h:"table"===i?o.parentNode.removeChild(o):"list"===i&&p.parentNode.removeChild(p)};const d=[].slice.call(document.querySelectorAll(r));this.C=o,this.i={...i,...h},d.map((t,e)=>{const s=JSON.parse(t.getAttribute("data-config")),n={...c,...s};this.s={index:e,classArray:t.classList,...l,...n,typeElement:n.element||"span",element:t},this.t()})}}export{r as default};
